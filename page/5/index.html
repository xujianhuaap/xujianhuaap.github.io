<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-java-study-jvm" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/19/java-study-jvm/" class="article-date">
  <time datetime="2016-02-19T01:37:42.000Z" itemprop="datePublished">2016-02-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/19/java-study-jvm/">java_study_jvm</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> jvm java虚拟机使java这门高级语言实现了跨平台性．jvm将字节码转换成具体平台的机器代码．</span><br><span class="line"><span class="number">2.</span> jvm也是一个进程，也有自己的代码，和自己的生命周期．调用java 命令就是启动该进程</span><br><span class="line"><span class="number">3.</span> jvm处理代码的过程，加载class文件，检验，解释执行．</span><br><span class="line"><span class="number">4.</span> jvm将执行程序所占用的内存划分为方法区，java虚拟机栈，本地方法栈，程序计数器，java堆．</span><br><span class="line">其中方法区和java堆是线程间共享的，其他是线程独享的内存．</span><br><span class="line">  方法区主要是是常量和静态变量，被虚拟机加载的类信息，以及运行时常量池．</span><br><span class="line">  程序计数器，是指该线程执行的刻度，来表示该线程执行的进度．这个计数器记录的是执行的java方法，</span><br><span class="line">正在执行的字节码指令的地址．</span><br><span class="line">  java虚拟机栈是指该线程正在执行的方法所占用的内存，每一个方法对应一个栈帧，当一个方法执行时，</span><br><span class="line">在虚拟机栈创建一个栈帧，当该方法执行完后，该栈帧消失．可能会出现栈溢出异常或者内存溢出异常．</span><br><span class="line">栈帧包括一下内容：局部变量表，操作数栈，动态链接，方法出口等信息．</span><br><span class="line">  java堆可以处于物理不连续的内存空间上，只要逻辑是连续的．</span><br><span class="line">  直接内存,不属于以上内存管理的范畴，是jdk1<span class="number">.4</span>引入的NIO类（new　input/output），他可以使用，</span><br><span class="line">Native函数库直接分配堆外内存，然后通过一个存储在java堆中的DirectByteBuffer对象作为这块，</span><br><span class="line">内存引用进行操作．</span><br><span class="line"><span class="number">5.</span>对象创建的过程</span><br><span class="line">  <span class="number">1</span>&gt;在运行时常量池中，检查是否存在这个类的引用，没有的话要进行类的加载．</span><br><span class="line">  <span class="number">2</span>&gt;分配内存（若内存是连续的可以采用指针碰撞法）</span><br><span class="line">  <span class="number">3</span>&gt;对象的必要设置（header)</span><br><span class="line">  <span class="number">4</span>&gt;对象初始化</span><br><span class="line">  对象主要包括三部分：header instanceData padding（对齐补充）</span><br><span class="line">  其中header组成主要有一下几部分：自身运行时数据和类型指针;</span><br><span class="line">  其中，自身运行时数据有主要有，hash码，GC分代年龄，锁状态标志，线程持有的锁，偏向线程，</span><br><span class="line">  偏向时间戳．</span><br><span class="line">  而类型指针是指向他的类元数据的指针．来判断是那个类的实例．</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/02/19/java-study-jvm/" data-id="cjbuw5cbn002fd7nm7asvxgbz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java-jvm/">java jvm</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java_study_thread" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/13/java_study_thread/" class="article-date">
  <time datetime="2016-02-13T03:27:38.000Z" itemprop="datePublished">2016-02-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/13/java_study_thread/">android-frameworks</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1. Thread 线程是进程的组成单元，一个进程由一个或多个线程组成，而每个线程通常代表一个任务．</span><br><span class="line">2. 多线程的存在在于并发的需要．更准确的说是轻量级并发的需要．这里的轻量级是与进程并发相比，</span><br><span class="line">毕竟创建和撤销线程要比创建和撤销进程消耗的计算机资源要小的多．</span><br><span class="line">3. 线程有一下四个状态：创建　可运行　堵塞　等待　退出</span><br><span class="line">当new一个线程后，线程处于创建状态，</span><br><span class="line">当<span class="keyword">start</span>之后处于　可运行装态</span><br><span class="line">当线程获取不到对象锁时就会进入堵塞状态</span><br><span class="line">当线程调用<span class="keyword">wait</span>或者<span class="keyword">join</span>就会进入等待状态，当其等到通知时才会被唤醒</span><br><span class="line">当该线程运行任务执行完，或者出现未捕获的异常时就退出</span><br><span class="line"><span class="number">4.</span> <span class="keyword">sleep</span>()让其他低的优先级的线程获得执行的机会，但不释放锁</span><br><span class="line">   yiled()只是让该线程回到可执行状态，它可能回来又马上执行</span><br><span class="line">   <span class="keyword">wait</span>()释放锁,只能在同步方法中使用，线程进入等待状态直到被唤醒</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/02/13/java_study_thread/" data-id="cjbuw5cbu002md7nmfwzzgs2e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java-thread/">java thread</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android-application-handler" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/27/android-application-handler/" class="article-date">
  <time datetime="2016-01-27T05:01:32.000Z" itemprop="datePublished">2016-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/27/android-application-handler/">android-application-handler</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>参考文件<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">core<span class="regexp">/java/</span>android<span class="regexp">/os/</span>Looper.java</span><br><span class="line">core<span class="regexp">/java/</span>android<span class="regexp">/os/</span>Handler.java</span><br><span class="line">java<span class="regexp">/lang/</span>Thread.java</span><br><span class="line">java<span class="regexp">/lang/</span>ThreadLocal.java</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>2.Thread<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">１＞在一个线程中启动一个新的线程，我们称为线程为原线程的子线程，因此一个<span class="keyword">Thread</span>可能会有Parent</span><br><span class="line"><span class="built_in">Thread,</span>也可能有自己的Child <span class="keyword">Thread</span>．当我们每创建新线程的时候，都会调用Create()方法，在</span><br><span class="line">这个方法中，主要执行一下逻辑，获得当前的线程（<span class="keyword">Thread</span>.currentThread()native），给当前线</span><br><span class="line">程设置相关变量，threadGroup（线程属于那一组），线程的target(runnable),线程的名字(thre</span><br><span class="line">adName),线程的优先级（priority),若当前线程的ｉnheritableValues不为空，则这样情况下创建</span><br><span class="line">ThreadLocal.Values(currentThread.inheritableValues)，并赋予当前线程的</span><br><span class="line"><span class="built_in">inheritableValues,</span>把<span class="keyword">Thread</span>实例添加到当前组中．</span><br><span class="line">２＞两个重要的成员变量，ThreadLocal.Values inheritableValues(继承而来) localValues</span><br><span class="line">３＞每一个线程进行线程间handler通信，必须要有Looper,每一个线程只有一个Looper．</span><br><span class="line"><span class="number">4</span>&gt;每一个线程都对应一个ThreadLocal.Values,但是所有的线程，只有一个ThreadLocal.</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>ThreadLocal</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">这个类实现了线程本地化存储，所有的线程都拥有一个ThreadLocal的变量，也有对应的Values</span><br><span class="line">保存在ThreadLocal中.</span><br><span class="line">ThreadLocal&lt;T&gt; T 就是线程的范型</span><br><span class="line"><span class="comment">//返回的是当前线程</span></span><br><span class="line">&lt;T&gt; <span class="built_in">get</span>()｛</span><br><span class="line">  &lt;<span class="number">1</span>&gt;获得当前线程</span><br><span class="line">  &lt;<span class="number">2</span>&gt;获得当前的线程的localValues并赋予局部变量Values values</span><br><span class="line">  &lt;<span class="number">3</span>&gt;若values不为空，根据ｖalues的成员变量table,以及mask(可以求得index)</span><br><span class="line">      <span class="keyword">Object</span>[] table = values.table;</span><br><span class="line">                <span class="built_in">int</span> index = hash &amp; values.mask;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.reference == table[index]) &#123;</span><br><span class="line">                    <span class="keyword">return</span> (T) table[index + <span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">      ｝</span><br><span class="line">  &lt;<span class="number">4</span>&gt;若为空则创建新的localValues实例，调用（T）values.getAfterMiss(<span class="keyword">this</span>)</span><br><span class="line">｝</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">Object</span> getAfterMiss(ThreadLocal&lt;?&gt; <span class="built_in">key</span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line">静态内部类</span><br><span class="line"><span class="keyword">static</span> class Values&#123;</span><br><span class="line">  １&gt;成员变量介绍</span><br><span class="line">  <span class="comment">//必须是２的幂值</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">int</span> INITIAL_SIZE = <span class="number">16</span>;</span><br><span class="line">  <span class="comment">//移除的实体holder</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">Object</span> TOMBSTONE = <span class="keyword">new</span> <span class="keyword">Object</span>();</span><br><span class="line">  <span class="comment">//Map实体类，key为ThreadLocaL 长度为２的幂值</span></span><br><span class="line">  <span class="comment">//table　是一个序列key,value，key,value．．．</span></span><br><span class="line">  <span class="comment">//key为WeakReference&lt;ThreadLocaL&lt;T&gt;&gt;</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">Object</span>[] table;</span><br><span class="line">  <span class="comment">//用于将Hash值转成index</span></span><br><span class="line">  <span class="keyword">private</span> <span class="built_in">int</span> mask;</span><br><span class="line">  <span class="comment">//活者的实体类的数目</span></span><br><span class="line">  <span class="keyword">private</span> <span class="built_in">int</span> <span class="built_in">size</span>;</span><br><span class="line">  <span class="comment">//被移除掉的实体类的数目</span></span><br><span class="line">  <span class="keyword">private</span> <span class="built_in">int</span> tombstones;</span><br><span class="line">  <span class="comment">//存活的实体类和被移除掉的实体类最大数目</span></span><br><span class="line">  <span class="keyword">private</span> <span class="built_in">int</span> maximumLoad;</span><br><span class="line">  <span class="comment">/** Points to the next cell to clean up. */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="built_in">int</span> clean;</span><br><span class="line">  <span class="number">2</span>&gt; 构造函数</span><br><span class="line">  Values()&#123;</span><br><span class="line">    <span class="comment">//创建新的空的table,长度为INITIAL_SIZE*2,并且mask为table．lengh-1</span></span><br><span class="line">    <span class="comment">//maximumLoad为INITIAL_SIZE 的２／３，clean=0;</span></span><br><span class="line">    initializeTable(INITIAL_SIZE);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Values(Values fromParent)｛</span><br><span class="line">    &lt;<span class="number">1</span>&gt;<span class="comment">//将fromParent的相关属性设置到新的实例上</span></span><br><span class="line">    &lt;<span class="number">2</span>&gt;继承<span class="keyword">Table</span></span><br><span class="line">    inheritValues（fromParent）;</span><br><span class="line">  ｝</span><br><span class="line">  ３&gt;重要的方法</span><br><span class="line">    <span class="comment">//在GC可能回收的情况下，对Ｖalues的table中某项，该项是reference（key），对其进</span></span><br><span class="line">    <span class="comment">//行判断,若放在其中的Ｔ为空说明GC已经回收了其中的值，则置该项为TOMBSTONE(墓碑)，</span></span><br><span class="line">    <span class="comment">//它的下一项为null,size--,tombstones++m,并将该项的index赋予Values的clear</span></span><br><span class="line">    cleanUp();</span><br><span class="line">    <span class="comment">//table 可能是　null,tombstones,也可能是reference</span></span><br><span class="line">    <span class="comment">//对于table的每一项进行轮询，若某项既不为空也不为TOMBSTONE(移除的实体),</span></span><br><span class="line">    <span class="comment">//那么该项为reference，取出引用中的Raw type (InheritableThreadLocal)</span></span><br><span class="line">    <span class="comment">//若InheritableThreadLocal不为空（没有被ＧＣ机制回收），那么 该项的下一</span></span><br><span class="line">    <span class="comment">//项为fromParent的对应项的值．若为空则该项为TOMBSTONE,下一项的值为空，size--,</span></span><br><span class="line">    <span class="comment">//tombstones++     </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> inheritValues(Values fromParent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Looper</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&gt;Looper 是一个循环器，检查MessageQuee是否有Message;</span><br><span class="line"><span class="number">2</span>&gt;在创建Looper实例化之前就已经实例化了一个mThreadLocal</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;Looper&gt; sThreadLocal = <span class="keyword">new</span> ThreadLocal&lt;Looper&gt;();</span><br><span class="line"><span class="comment">//主要是创建Looper的实例并且设到类成员变量sThreadLocal上</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>handler</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//CallBack 中的方法是handleMessage(Message msg)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Looper looper, Callback callback, <span class="keyword">boolean</span> async)</span></span>;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(Callback callback, <span class="keyword">boolean</span> async)</span> </span>&#123;</span><br><span class="line">  ....</span><br><span class="line">  <span class="comment">//实质上是从mThreadLocal中获得mThreadLocal.get()</span></span><br><span class="line">  mLooper = Looper.myLooper();</span><br><span class="line">  ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>总结</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ThreadLocal<span class="variable">&lt;Looper&gt;</span> reference</span><br><span class="line">ThreadLocal.Values <span class="built_in">table</span></span><br><span class="line">Thread重要成员变量　inheritableValues localValues</span><br><span class="line">Looper　threadLocal（类成员变量）</span><br><span class="line">创建线程时，若运行的线程有inheritValues则创建ThreadLocal.Values的实例，并赋值给</span><br><span class="line">Thread的成员变量inheritableValues．</span><br><span class="line">在创建好的线程中加载Looper的同时，创建ThreadLocal<span class="variable">&lt;Looper&gt;</span>的实例(同时创建reference实例)</span><br><span class="line">，在实例化Looper的同时将实例设置到ThreadLocal<span class="variable">&lt;Looper&gt;</span>的实例上．在这个过程中实例化</span><br><span class="line">localValues,并调用其put()</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/27/android-application-handler/" data-id="cjbuw5caa000ld7nm30grrwc7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/handler/">handler</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android-application-aidl" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/27/android-application-aidl/" class="article-date">
  <time datetime="2016-01-27T01:29:56.000Z" itemprop="datePublished">2016-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/27/android-application-aidl/">android-application-aidl</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>参考文件<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"><span class="number">2.</span>  aidl</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>aidl(Android Interface Descriptor Language)是一种为跨进程通信的接口描述语言，<br>作用类似于ContentProviderNativie类一样的功能，aidl的内部类Stub一方面描述了业务所<br>需的成员变量和方法，另一方面继承了Binder;Stub的调用是在服务端调用，对于客户端进程在<br>在与服务端进程建立链接后，通过Stub.asInterface()获得服务端进程的业务类的副本，并调<br>用相应的方法．当客户端调用某个方法时，在服务端就会调用相应的方法．<br>在Eclipse下．aidl文件由aidl工具生成位于工程gen包下的aidl包下java文件．它只能引用<br>其他aidl中的接口，不能直接引用java类中的接口．<br>```</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/27/android-application-aidl/" data-id="cjbuw5ca3000fd7nm5hi0xglf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aidl/">aidl</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android-application-parcelable" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/26/android-application-parcelable/" class="article-date">
  <time datetime="2016-01-26T12:18:46.000Z" itemprop="datePublished">2016-01-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/26/android-application-parcelable/">android-application-parcelable</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>参考文件</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">core<span class="regexp">/java/</span>android<span class="regexp">/os/</span>Parcel.java</span><br></pre></td></tr></table></figure>
</li>
<li><p>Parcel</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Parcel</span> 是信息（可以通过<span class="selector-tag">IBinder</span>传递）的容器,这些信息可以是数据或者引用，它里面包含的是扁平的</span><br><span class="line">数据，这些数据在目标进程再去扁平化．一般是通过多种方法写特定的类型信息，或者实现<span class="selector-tag">Parcelable</span>接</span><br><span class="line">口，进而若发送Ｉ<span class="selector-tag">Binder</span>的进程还在存活，该<span class="selector-tag">Ibinder</span>的引用将会为目标进程带来一个<span class="selector-tag">BinderProxy</span>,与</span><br><span class="line">发送进程进行通信．</span><br><span class="line">要特别注意，<span class="selector-tag">Parcel</span> 不是一般意义上的数据的序列化．这个类，以及<span class="selector-tag">Parcelable</span>是为进程间通信高效实</span><br><span class="line">现设计的，在这样的情况下，对<span class="selector-tag">Parcel</span>数据进行持久化储存是不合适的，因为任何<span class="selector-tag">Parcel</span>中的底层数据的</span><br><span class="line">变化可能使老数据不可读．</span><br><span class="line"><span class="selector-tag">Parcel</span> 中可以储存基本数据类型，基本数据的数组，实现了<span class="selector-tag">Parcleable</span>的实体类，<span class="selector-tag">Bundle</span>,还有一些特</span><br><span class="line">殊的例如：</span><br><span class="line"><span class="selector-tag">Active</span> <span class="selector-tag">Objects</span></span><br><span class="line">  <span class="selector-tag">writeStrongBinder</span>(IBinder)              <span class="selector-tag">readStrongBinder</span>()</span><br><span class="line">  <span class="selector-tag">writeStrongInterface</span>(IInterface)        <span class="selector-tag">readBinderArray</span>(IBinder[])</span><br><span class="line">  <span class="selector-tag">writeBinderArray</span>(IBinder[])             <span class="selector-tag">createBinderArray</span>()</span><br><span class="line">  <span class="selector-tag">writeBinderList</span>(List)                   <span class="selector-tag">readBinderList</span>(List)</span><br><span class="line">  <span class="selector-tag">createBinderArrayList</span>()</span><br><span class="line">没类型的容器</span><br><span class="line">  <span class="selector-tag">writeValue</span>(Object)       <span class="selector-tag">readValue</span>(ClassLoader)</span><br><span class="line">  <span class="selector-tag">writeArray</span>(Object[])     <span class="selector-tag">readArray</span>(ClassLoader)</span><br><span class="line">  <span class="selector-tag">writeList</span>(List)          <span class="selector-tag">readList</span>(List, ClassLoader)</span><br><span class="line">  <span class="selector-tag">readArrayList</span>(ClassLoader)</span><br><span class="line">  <span class="selector-tag">writeMap</span>(Map)            <span class="selector-tag">readMap</span>(Map, ClassLoader)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Parcel 工作机制</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ParcelPool POOL_SIXE=6(默认情况下)　</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Parcel[] sOwnedPool = <span class="keyword">new</span> Parcel[POOL_SIZE];</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Parcel[] sHolderPool = <span class="keyword">new</span> Parcel[POOL_SIZE]</span><br><span class="line"><span class="comment">//先判断sOwnedPool中是否有不为空的若有则返回对应的Ｐarcele，若都为空就创建一个Parcle</span></span><br><span class="line"><span class="comment">//实例　new Parcel(mOwnObject)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Parcel obtain()</span><br><span class="line"><span class="comment">//回收机制</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">void</span> <span class="title">recycle</span><span class="params">()</span> </span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Parcel.cpp(暂不分析)</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">struct flat_binder_object &#123;</span><br><span class="line">         /* <span class="number">8</span> bytes <span class="keyword">for</span> large_flat_header. */</span><br><span class="line">         __u32           <span class="keyword">type</span>;</span><br><span class="line">         __u32           flags;</span><br><span class="line"></span><br><span class="line">         /* <span class="number">8</span> bytes <span class="keyword">of</span> data. */</span><br><span class="line">         union &#123;</span><br><span class="line">                 binder_uintptr_t        binder; /* local <span class="keyword">object</span> */</span><br><span class="line">                 __u32                   handle; /* remote <span class="keyword">object</span> */</span><br><span class="line">         &#125;;</span><br><span class="line"></span><br><span class="line">       /* extra data associated <span class="keyword">with</span> local <span class="keyword">object</span> */</span><br><span class="line">       binder_uintptr_t        cookie;</span><br><span class="line">&#125;;</span><br><span class="line">   <span class="built_in">void</span> acquire_object(<span class="keyword">const</span> sp&lt;<span class="type">ProcessState</span>&gt;&amp; <span class="keyword">proc</span>,<span class="keyword">const</span> flat_binder_object&amp; obj,</span><br><span class="line">   <span class="keyword">const</span> <span class="built_in">void</span>* who);</span><br><span class="line">   <span class="built_in">void</span> acquire_object(<span class="keyword">const</span> sp&lt;<span class="type">ProcessState</span>&gt;&amp; <span class="keyword">proc</span>,</span><br><span class="line">                       <span class="keyword">const</span> flat_binder_object&amp; obj, <span class="keyword">const</span> <span class="built_in">void</span>* who);</span><br><span class="line">   <span class="built_in">void</span> release_object(<span class="keyword">const</span> sp&lt;<span class="type">ProcessState</span>&gt;&amp; <span class="keyword">proc</span>,</span><br><span class="line">                       <span class="keyword">const</span> flat_binder_object&amp; obj, <span class="keyword">const</span> <span class="built_in">void</span>* who);</span><br><span class="line">   <span class="built_in">void</span> flatten_binder(<span class="keyword">const</span> sp&lt;<span class="type">ProcessState</span>&gt;&amp; <span class="keyword">proc</span>,</span><br><span class="line">                       <span class="keyword">const</span> sp&lt;<span class="type">IBinder</span>&gt;&amp; binder, flat_binder_object* <span class="keyword">out</span>);</span><br><span class="line">   <span class="built_in">void</span> flatten_binder(<span class="keyword">const</span> sp&lt;<span class="type">ProcessState</span>&gt;&amp; <span class="keyword">proc</span>,</span><br><span class="line">                       <span class="keyword">const</span> wp&lt;<span class="type">IBinder</span>&gt;&amp; binder, flat_binder_object* <span class="keyword">out</span>);</span><br><span class="line">   status_t unflatten_binder(<span class="keyword">const</span> sp&lt;<span class="type">ProcessState</span>&gt;&amp; <span class="keyword">proc</span>,</span><br><span class="line">                             <span class="keyword">const</span> flat_binder_object&amp; flat, sp&lt;<span class="type">IBinder</span>&gt;* <span class="keyword">out</span>);</span><br><span class="line">   status_t unflatten_binder(<span class="keyword">const</span> sp&lt;<span class="type">ProcessState</span>&gt;&amp; <span class="keyword">proc</span>,</span><br><span class="line">                             <span class="keyword">const</span> flat_binder_object&amp; flat, wp&lt;<span class="type">IBinder</span>&gt;* <span class="keyword">out</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/26/android-application-parcelable/" data-id="cjbuw5cad000pd7nmys7blkut" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Parcelable/">Parcelable</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-andoroid-application-binder" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/26/andoroid-application-binder/" class="article-date">
  <time datetime="2016-01-26T08:49:27.000Z" itemprop="datePublished">2016-01-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/26/andoroid-application-binder/">andoroid-application-binder</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>参考文件</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">core<span class="regexp">/java/</span>android<span class="regexp">/os/</span>Binder.java</span><br></pre></td></tr></table></figure>
</li>
<li><p>Binder(java)中的主要方法</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//owner业务层类　 descriptor业务层类的标签（通过该标签查询出业务层类）</span></span><br><span class="line"><span class="comment">//该方法一般在创建业务层native类实例时，进行调用．</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">attachInterface</span><span class="params">(IInterface owner, String descriptor)</span></span>;</span><br><span class="line"><span class="comment">//通过该标签查descriptor询出业务层类</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">IInterface <span class="title">queryLocalInterface</span><span class="params">(String descriptor)</span></span>;</span><br><span class="line"><span class="comment">//与内核binder的驱动交互的地方</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="function"><span class="keyword">boolean</span> <span class="title">transact</span><span class="params">(<span class="keyword">int</span> code, Parcel data, Parcel reply,<span class="keyword">int</span> flags)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>binder机制下的业务层native类</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据obj的descriptor查询业务层类的实例，如果为空创建新的实例</span></span><br><span class="line"><span class="keyword">static</span> T　asInterface(IBinder obj)</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/26/andoroid-application-binder/" data-id="cjbuw5ca2000dd7nmoct954hy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/binder/">binder</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android-application-contentprovider" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/25/android-application-contentprovider/" class="article-date">
  <time datetime="2016-01-25T12:27:59.000Z" itemprop="datePublished">2016-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/25/android-application-contentprovider/">android-application-contentprovider</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>参考文件</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">core<span class="meta-keyword">/java/</span>android<span class="meta-keyword">/content/</span>pm/ProviderInfo.java</span><br><span class="line">services<span class="meta-keyword">/java/</span>com<span class="meta-keyword">/android/</span>server<span class="meta-keyword">/am/</span>ContentProviderRecord.java</span><br><span class="line">core<span class="meta-keyword">/java/</span>android<span class="meta-keyword">/app/</span>IActivityManager.java</span><br></pre></td></tr></table></figure>
</li>
<li><p>ContentProvider的简介</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1&gt; </span> 实现数据在应用间共享.这是对SQliteDataBase的互补.</span><br><span class="line"><span class="meta">2&gt; </span> 管理数据主要是通过ContentResolver</span><br><span class="line"><span class="meta">3&gt; </span> contentprovider 是安卓本地数据库(repository)管理者,数据一般是关系型数据.</span><br><span class="line"><span class="meta">4&gt; </span> contentprovider与client必须提供标准的接口</span><br></pre></td></tr></table></figure>
</li>
<li><p>contentprovider的主要方法</p>
<figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">和Activity一样,需要在manifest.xml中配置<span class="variable">&lt;provider&gt;</span>&lt;/provider&gt;,contentprider的实例有系</span><br><span class="line">统创建,因此应用一般不需要直接实例化ContentProvider.在实例化后并不能直接使用他的属性和方法,必</span><br><span class="line">须由他的实现类在<span class="keyword">on</span>Create()进行初始化.</span><br><span class="line">contentprovider作为抽象类,我们必须实现它的抽象方法:<span class="keyword">on</span>Create()(),增删查改.</span><br><span class="line">Transport内部类的作用,就是跨进程的binder机制通信．Transport继承于ContentProviderNativie</span><br><span class="line">而ContentProviderNativie作为一个抽象类继承于Binder并且实现了Ｉcontentprovider.而且其内部</span><br><span class="line">类ContentProviderProxy实现了IContentProvider.IContentProvider</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>４．  抽象类ContentProviderNativie<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据obj查询出IContentProvider 若为空创建ContentProviderProxy,ContentProviderProxy</span></span><br><span class="line"><span class="comment">//实现了IContentProvider</span></span><br><span class="line"><span class="keyword">static</span> IContentProvider asInterface(IBinder obj)</span><br><span class="line"><span class="comment">//返回ContentProviderNativie的实例</span></span><br><span class="line"><span class="keyword">static</span> IBinder asBinder()</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>ContentProviderHolder的介绍</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ＩActivityManager的内部类</span><br><span class="line"><span class="symbol">ContentProviderHolder</span>实现了Parcelable</span><br><span class="line">主要成员变量为IContentProvider ProviderInfo</span><br><span class="line">构造器为ContentProvider(ProviderInfo <span class="meta">info</span>)</span><br><span class="line">值得研究的方法：</span><br></pre></td></tr></table></figure>
</li>
<li></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/25/android-application-contentprovider/" data-id="cjbuw5ca6000hd7nmsikox45w" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/content-provider/">content_provider</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android-framework-launch-activity01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/25/android-framework-launch-activity01/" class="article-date">
  <time datetime="2016-01-25T03:18:44.000Z" itemprop="datePublished">2016-01-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/25/android-framework-launch-activity01/">android-frameworks-launchactivity01</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>参考文件</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frameworks<span class="regexp">/base/</span>core<span class="regexp">/java/</span>android<span class="regexp">/view/</span>WindowManagerImpl.java</span><br></pre></td></tr></table></figure>
</li>
<li><p>Activity下的attach()</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1&gt; </span>设置有关属性</span><br><span class="line"><span class="number">2</span>&gt;创建Window的实列,并且设置WindowManager</span><br><span class="line">  &lt;<span class="number">1</span>&gt;PolicyManager.makeNewWindow()--&gt;mPolicy.makeNewWindow()---&gt;</span><br><span class="line">    new PhoneWindow()</span><br><span class="line">  &lt;<span class="number">2</span>&gt; window.setWindowmanger(wm),wm为WindowManagerImpl的实例,若其为空,</span><br><span class="line">  测创建一个新的实例.然后为window设置一个LocalWindowManager(wm)</span><br><span class="line">  小结:</span><br><span class="line">  这里是对代理设计模式的应用,以LocalWindowManager 为例 windowManagerImpl已经</span><br><span class="line">  实现了addView()为什么LocalWindowManager又重写该方法?代理模式有什么优势,在框</span><br><span class="line">  架层有如此广泛的应用.首先,代理模式,可以控制实现类的访问权限.再者,代理类可以修改对</span><br><span class="line">  应的operator(),这样维护了实现类的稳定性,当该operator()稳定后在移到实现类.</span><br><span class="line">  一般来说,在一个类创建对象耗费资源较多时,考虑使用代理类,当确实需要调用operator()</span><br><span class="line">  时才会,创建实现类的实例.当一个类功能较复杂,还有些不稳定的,可以使用代理类.需要对实</span><br><span class="line">  现类访问权限限制的,也可以使用代理类.</span><br></pre></td></tr></table></figure>
</li>
<li><p>WindowManagerImpl的addView(decorView)</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">1&gt; </span>声明局部变量ViewRoot root</span><br><span class="line"><span class="meta">2&gt; </span>寻找在WindowManagerImpl的成员变量mViews中查找是否有decorView如果有返回index</span><br><span class="line"><span class="meta">3&gt; </span>root=roots[index]//roots是ViewRooot的集合,并且设置有关属性LayoutParams,并且</span><br><span class="line">   return 函数堵塞</span><br><span class="line"><span class="meta">4&gt; </span>如果没有相应的decorView的,则创建相应的root,刷新roots,刷新views,root.setView()</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/25/android-framework-launch-activity01/" data-id="cjbuw5cam0012d7nmhjhr16ml" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/launch-activity/">launch_activity</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android-frameworks-servermanager" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/19/android-frameworks-servermanager/" class="article-date">
  <time datetime="2016-01-19T09:44:25.000Z" itemprop="datePublished">2016-01-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/19/android-frameworks-servermanager/">android-frameworks-servermanager</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>参考文件</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">platform<span class="regexp">/base/</span>cmds<span class="regexp">/servicemanager/</span>service_manager.c</span><br><span class="line">platform<span class="regexp">/base/</span>cmds<span class="regexp">/servicemanager/</span>binder.c</span><br></pre></td></tr></table></figure>
</li>
<li><p>ServerManager.main()</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">int</span> main(int argc, char **argv)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">struct </span><span class="keyword">binder_state </span>*<span class="keyword">bs;</span></span><br><span class="line"><span class="keyword"> </span>   void *<span class="keyword">svcmgr </span>= <span class="keyword">BINDER_SERVICE_MANAGER;</span></span><br><span class="line"><span class="keyword"> </span>   //打开<span class="keyword">binder虚拟设备,</span></span><br><span class="line"><span class="keyword"> </span>   <span class="keyword">bs </span>= <span class="keyword">binder_open(128*1024);//binder所占内存大小</span></span><br><span class="line"><span class="keyword"> </span>   //<span class="keyword">binder_become_context_manager(bs)与binder设备进行通信将自己变成Context_ServerManager</span></span><br><span class="line"><span class="keyword"> </span>   <span class="meta">if</span> (<span class="keyword">binder_become_context_manager(bs)) </span>&#123;</span><br><span class="line">        LOGE(<span class="string">"cannot become context manager (%s)\n"</span>, <span class="keyword">strerror(errno));</span></span><br><span class="line"><span class="keyword"> </span>       return -<span class="number">1</span><span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">svcmgr_handle= </span><span class="keyword">svcmgr;</span></span><br><span class="line"><span class="keyword"> </span>   //检查是否有有效请求,若有将会调用<span class="keyword">svcmgr_handler</span></span><br><span class="line"><span class="keyword"> </span>   <span class="keyword">binder_loop(bs, </span><span class="keyword">svcmgr_handler);</span></span><br><span class="line"><span class="keyword"> </span>   return <span class="number">0</span><span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在binder.h中相关的方法</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct </span><span class="keyword">binder_state</span></span><br><span class="line"><span class="keyword">&#123;</span></span><br><span class="line"><span class="keyword"> </span>   int fd<span class="comment">;</span></span><br><span class="line">    void *mapped<span class="comment">;//未确定类型的指针</span></span><br><span class="line">    unsigned mapsize<span class="comment">;</span></span><br><span class="line">&#125;<span class="comment">;</span></span><br><span class="line">//打开虚拟<span class="keyword">binder设备</span></span><br><span class="line"><span class="keyword">struct </span><span class="keyword">binder_state </span>*<span class="keyword">binder_open(unsigned </span>mapsize)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">struct </span><span class="keyword">binder_state </span>*<span class="keyword">bs;</span></span><br><span class="line"><span class="keyword"> </span>   <span class="keyword">bs </span>= malloc(sizeof(*<span class="keyword">bs));//向系统申请分配内存(低于128k) </span>    </span><br><span class="line">    <span class="meta">if</span> (!<span class="keyword">bs) </span>&#123;</span><br><span class="line">        errno = ENOMEM<span class="comment">;</span></span><br><span class="line">        return <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    //挂载<span class="string">'/dev/binder'</span>目录</span><br><span class="line">    <span class="keyword">bs-&gt;fd </span>= open(<span class="string">"/dev/binder"</span>, O_RDWR)<span class="comment">;</span></span><br><span class="line">    <span class="meta">if</span> (<span class="keyword">bs-&gt;fd </span>&lt; <span class="number">0</span>) &#123;</span><br><span class="line">        fprintf(stderr,<span class="string">"binder: cannot open device (%s)\n"</span>,</span><br><span class="line">                <span class="keyword">strerror(errno));</span></span><br><span class="line"><span class="keyword"> </span>       goto fail_open<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    //设置<span class="keyword">bs </span>反映<span class="keyword">binder设备所占内存大小的变量mapsize</span></span><br><span class="line"><span class="keyword"> </span>   <span class="keyword">bs-&gt;mapsize </span>= mapsize<span class="comment">;</span></span><br><span class="line">    //映射内存</span><br><span class="line">    <span class="keyword">bs-&gt;mapped </span>= mmap(NULL, mapsize, PROT_READ, MAP_PRIVATE, <span class="keyword">bs-&gt;fd, </span><span class="number">0</span>)<span class="comment">;//用户进程级别申请内存</span></span><br><span class="line">    <span class="meta">if</span> (<span class="keyword">bs-&gt;mapped </span>== MAP_FAILED) &#123;</span><br><span class="line">        fprintf(stderr,<span class="string">"binder: cannot map device (%s)\n"</span>,</span><br><span class="line">                <span class="keyword">strerror(errno));</span></span><br><span class="line"><span class="keyword"> </span>       goto fail_map<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="keyword">bs;</span></span><br><span class="line"><span class="keyword">&#125;</span></span><br><span class="line"><span class="keyword">//註冊成爲Context_Manager</span></span><br><span class="line"><span class="keyword">int </span><span class="keyword">binder_become_context_manager(struct </span><span class="keyword">binder_state </span>*<span class="keyword">bs)</span></span><br><span class="line"><span class="keyword">&#123;</span></span><br><span class="line"><span class="keyword"> </span>   return ioctl(<span class="keyword">bs-&gt;fd, </span><span class="keyword">BINDER_SET_CONTEXT_MGR, </span><span class="number">0</span>)<span class="comment">;</span></span><br><span class="line">&#125;</span><br><span class="line">//<span class="keyword">binder_handler </span>是一个回调函数</span><br><span class="line">//不断通过ioctl检查是否有请求</span><br><span class="line"><span class="symbol">void</span> <span class="keyword">binder_loop(struct </span><span class="keyword">binder_state </span>*<span class="keyword">bs, </span><span class="keyword">binder_handler </span>func)</span><br><span class="line">&#123;</span><br><span class="line">    int res<span class="comment">;</span></span><br><span class="line">    <span class="keyword">struct </span><span class="keyword">binder_write_read </span><span class="keyword">bwr;//binder设备读写数据结构</span></span><br><span class="line"><span class="keyword"> </span>   unsigned readbuf[<span class="number">32</span>]<span class="comment">;</span></span><br><span class="line">    //初始化<span class="keyword">binder设备读写数据结构</span></span><br><span class="line"><span class="keyword"> </span>   <span class="keyword">bwr.write_size </span>= <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    <span class="keyword">bwr.write_consumed </span>= <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    <span class="keyword">bwr.write_buffer </span>= <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    //设置为readbuf的首变量</span><br><span class="line">    readbuf[<span class="number">0</span>] = <span class="keyword">BC_ENTER_LOOPER;</span></span><br><span class="line"><span class="keyword"> </span>   //</span><br><span class="line">    <span class="keyword">binder_write(bs, </span>readbuf, sizeof(unsigned))<span class="comment">;</span></span><br><span class="line">    for (<span class="comment">;;) &#123;</span></span><br><span class="line">        <span class="keyword">bwr.read_size </span>= sizeof(readbuf)<span class="comment">;</span></span><br><span class="line">        <span class="keyword">bwr.read_consumed </span>= <span class="number">0</span><span class="comment">;</span></span><br><span class="line">        <span class="keyword">bwr.read_buffer </span>= (unsigned) readbuf<span class="comment">;</span></span><br><span class="line">        res = ioctl(<span class="keyword">bs-&gt;fd, </span><span class="keyword">BINDER_WRITE_READ, </span>&amp;<span class="keyword">bwr);</span></span><br><span class="line"><span class="keyword"> </span>       <span class="meta">if</span> (res &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            LOGE(<span class="string">"binder_loop: ioctl failed (%s)\n"</span>, <span class="keyword">strerror(errno));</span></span><br><span class="line"><span class="keyword"> </span>           <span class="keyword">break;</span></span><br><span class="line"><span class="keyword"> </span>       &#125;</span><br><span class="line">        //解析请求</span><br><span class="line">        res = <span class="keyword">binder_parse(bs, </span><span class="number">0</span>, readbuf, <span class="keyword">bwr.read_consumed, </span>func)<span class="comment">;</span></span><br><span class="line">        <span class="meta">if</span> (res == <span class="number">0</span>) &#123;</span><br><span class="line">            LOGE(<span class="string">"binder_loop: unexpected reply?!\n"</span>)<span class="comment">;</span></span><br><span class="line">            <span class="keyword">break;</span></span><br><span class="line"><span class="keyword"> </span>       &#125;</span><br><span class="line">        <span class="meta">if</span> (res &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            LOGE(<span class="string">"binder_loop: io error %d %s\n"</span>, res, <span class="keyword">strerror(errno));</span></span><br><span class="line"><span class="keyword"> </span>           <span class="keyword">break;</span></span><br><span class="line"><span class="keyword"> </span>       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//ioctl是设备驱动程序中对设备的I/O通道进行管理的函数,函数是<span class="keyword">switch(cmd)条件判断,执行不同</span></span><br><span class="line"><span class="keyword">//的操作.cmd参数在用户程序端由一些宏根据设备类型、序列号、传送方向、数据尺寸等生成,这个整数</span></span><br><span class="line"><span class="keyword">//通过系统调用传递到内核中的驱动程序，再由驱动程序使用解码宏从这个整数中得到设备的类型、序列</span></span><br><span class="line"><span class="keyword">//号、传送方向、数据尺寸等信息，然后通过switch&#123;case&#125;结构进行相应的操作.</span></span><br><span class="line"><span class="keyword">int </span><span class="keyword">binder_write(struct </span><span class="keyword">binder_state </span>*<span class="keyword">bs, </span>void *<span class="meta">data</span>, unsigned len)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">struct </span><span class="keyword">binder_write_read </span><span class="keyword">bwr;</span></span><br><span class="line"><span class="keyword"> </span>   int res<span class="comment">;</span></span><br><span class="line">    <span class="keyword">bwr.write_size </span>= len<span class="comment">;</span></span><br><span class="line">    <span class="keyword">bwr.write_consumed </span>= <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    <span class="keyword">bwr.write_buffer </span>= (unsigned) <span class="meta">data</span><span class="comment">;</span></span><br><span class="line">    <span class="keyword">bwr.read_size </span>= <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    <span class="keyword">bwr.read_consumed </span>= <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    <span class="keyword">bwr.read_buffer </span>= <span class="number">0</span><span class="comment">;</span></span><br><span class="line">    res = ioctl(<span class="keyword">bs-&gt;fd, </span><span class="keyword">BINDER_WRITE_READ, </span>&amp;<span class="keyword">bwr);</span></span><br><span class="line"><span class="keyword"> </span>   <span class="meta">if</span> (res &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        fprintf(stderr,<span class="string">"binder_write: ioctl failed (%s)\n"</span>,</span><br><span class="line">                <span class="keyword">strerror(errno));</span></span><br><span class="line"><span class="keyword"> </span>   &#125;</span><br><span class="line">    return res<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/19/android-frameworks-servermanager/" data-id="cjbuw5cat001bd7nma5csfyzl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/servermanager/">servermanager</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-C-operator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/19/C-operator/" class="article-date">
  <time datetime="2016-01-19T02:50:06.000Z" itemprop="datePublished">2016-01-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/19/C-operator/">C++operator</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>参考文件</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">platform<span class="regexp">/base/i</span>nclude<span class="regexp">/utils/</span>TextOutput.h</span><br></pre></td></tr></table></figure>
</li>
<li><p>关于Operator</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">我们只能使用,C++预定义的操作符,主要是依靠Operator的重载,扩大操作符的作用范围.</span><br><span class="line">virtual 为虚拟函数关键字,在有继承关系的类中,子类中可以覆盖父类中的方法.</span><br><span class="line">typedef 是为了提高代码的可读性,为变量,方法起别名.</span><br></pre></td></tr></table></figure>
</li>
<li><p>TextOutput.h中的</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">TextOutput</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">                        TextOutput();</span><br><span class="line">    <span class="keyword">virtual</span>             ~TextOutput();<span class="comment">//析构函数</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> status_t    <span class="title">print</span>(<span class="params"><span class="keyword">const</span> <span class="keyword">char</span>* txt, size_t len</span>) </span>= <span class="number">0</span>;<span class="comment">//打印函数</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span>        <span class="title">moveIndent</span>(<span class="params"><span class="keyword">int</span> delta</span>) </span>= <span class="number">0</span>;<span class="comment">//缩进函数</span></span><br><span class="line">    <span class="keyword">class</span>   <span class="title">Bundle</span> &#123;</span><br><span class="line">      <span class="keyword">public</span>:</span><br><span class="line">          <span class="function">inline <span class="title">Bundle</span>(<span class="params">TextOutput&amp; to</span>) : <span class="title">mTO</span>(<span class="params">to</span>) </span>&#123; to.pushBundle(); &#125;</span><br><span class="line">          inline ~Bundle() &#123; mTO.popBundle(); &#125;</span><br><span class="line">      <span class="keyword">private</span>:</span><br><span class="line">          TextOutput&amp;     mTO;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span>        <span class="title">pushBundle</span>(<span class="params"></span>) </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span>        <span class="title">popBundle</span>(<span class="params"></span>) </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">TextOutput&amp; endl(TextOutput&amp; to);<span class="comment">//换行</span></span><br><span class="line">TextOutput&amp; indent(TextOutput&amp; to);<span class="comment">//缩进</span></span><br><span class="line">TextOutput&amp; dedent(TextOutput&amp; to);<span class="comment">//反缩进</span></span><br><span class="line"><span class="comment">//打印相应数据类型</span></span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">const</span> <span class="keyword">char</span>* str);<span class="comment">//打印char</span></span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">char</span>);     <span class="comment">// writes raw character</span></span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">bool</span>);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">int</span>);<span class="comment">//打印</span></span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">long</span>);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, unsigned <span class="keyword">int</span>);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, unsigned <span class="keyword">long</span>);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">long</span> <span class="keyword">long</span>);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, unsigned <span class="keyword">long</span> <span class="keyword">long</span>);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">float</span>);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">double</span>);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, TextOutputManipFunc func);</span><br><span class="line">TextOutput&amp; <span class="keyword">operator</span>&lt;&lt;(TextOutput&amp; to, <span class="keyword">const</span> <span class="keyword">void</span>*);</span><br></pre></td></tr></table></figure>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/19/C-operator/" data-id="cjbuw5c9i0000d7nm0rdpvq9f" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C++</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/6/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/bat/">.bat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-Object/">C Object</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GC/">GC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MVP/">MVP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Parcelable/">Parcelable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TLS/">TLS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aidl/">aidl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-init-process/">android init_process</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android-proguard/">android proguard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/binder/">binder</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/content-provider/">content_provider</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/database-mysql/">database mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/float/">float</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go-beego/">go beego</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle-Project/">gradle Project</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle-Task/">gradle Task</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle-proguard/">gradle proguard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/handler/">handler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http-status/">http-status</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java-concurrent/">java concurrent</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java-jvm/">java jvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java-thread/">java thread</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/launch-activity/">launch_activity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux-cmd/">linux-cmd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/long-running-operation/">long_running_operation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/motion-event-multify-touch/">motion_event multify_touch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql-table/">mysql table</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql-backup/">mysql-backup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-cache/">nginx cache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-https/">nginx https</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-loader-balance/">nginx loader_balance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-reverse-proxy/">nginx reverse-proxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python-install/">python-install</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reflect/">reflect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server-nginx/">server nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/servermanager/">servermanager</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/set-content-view/">set_content_view</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh-scp/">ssh scp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg/">svg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/">test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/usb-booter/">usb-booter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/view-root-iml/">view_root_iml</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/bat/" style="font-size: 10px;">.bat</a> <a href="/tags/C-Object/" style="font-size: 10px;">C Object</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/GC/" style="font-size: 10px;">GC</a> <a href="/tags/JavaScript/" style="font-size: 13.33px;">JavaScript</a> <a href="/tags/MVP/" style="font-size: 10px;">MVP</a> <a href="/tags/Parcelable/" style="font-size: 10px;">Parcelable</a> <a href="/tags/TLS/" style="font-size: 10px;">TLS</a> <a href="/tags/aidl/" style="font-size: 10px;">aidl</a> <a href="/tags/android-init-process/" style="font-size: 10px;">android init_process</a> <a href="/tags/android-proguard/" style="font-size: 10px;">android proguard</a> <a href="/tags/binder/" style="font-size: 20px;">binder</a> <a href="/tags/c/" style="font-size: 10px;">c++</a> <a href="/tags/content-provider/" style="font-size: 10px;">content_provider</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/database-mysql/" style="font-size: 10px;">database mysql</a> <a href="/tags/float/" style="font-size: 10px;">float</a> <a href="/tags/go-beego/" style="font-size: 10px;">go beego</a> <a href="/tags/gradle/" style="font-size: 13.33px;">gradle</a> <a href="/tags/gradle-Project/" style="font-size: 10px;">gradle Project</a> <a href="/tags/gradle-Task/" style="font-size: 10px;">gradle Task</a> <a href="/tags/gradle-proguard/" style="font-size: 10px;">gradle proguard</a> <a href="/tags/handler/" style="font-size: 10px;">handler</a> <a href="/tags/http-status/" style="font-size: 10px;">http-status</a> <a href="/tags/java-concurrent/" style="font-size: 10px;">java concurrent</a> <a href="/tags/java-jvm/" style="font-size: 10px;">java jvm</a> <a href="/tags/java-thread/" style="font-size: 10px;">java thread</a> <a href="/tags/launch-activity/" style="font-size: 13.33px;">launch_activity</a> <a href="/tags/linux-cmd/" style="font-size: 10px;">linux-cmd</a> <a href="/tags/long-running-operation/" style="font-size: 10px;">long_running_operation</a> <a href="/tags/motion-event-multify-touch/" style="font-size: 10px;">motion_event multify_touch</a> <a href="/tags/mysql/" style="font-size: 16.67px;">mysql</a> <a href="/tags/mysql-table/" style="font-size: 10px;">mysql table</a> <a href="/tags/mysql-backup/" style="font-size: 10px;">mysql-backup</a> <a href="/tags/nginx-cache/" style="font-size: 10px;">nginx cache</a> <a href="/tags/nginx-https/" style="font-size: 10px;">nginx https</a> <a href="/tags/nginx-loader-balance/" style="font-size: 10px;">nginx loader_balance</a> <a href="/tags/nginx-reverse-proxy/" style="font-size: 10px;">nginx reverse-proxy</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/python-install/" style="font-size: 10px;">python-install</a> <a href="/tags/reflect/" style="font-size: 10px;">reflect</a> <a href="/tags/security/" style="font-size: 10px;">security</a> <a href="/tags/server-nginx/" style="font-size: 16.67px;">server nginx</a> <a href="/tags/servermanager/" style="font-size: 10px;">servermanager</a> <a href="/tags/set-content-view/" style="font-size: 10px;">set_content_view</a> <a href="/tags/ssh-scp/" style="font-size: 10px;">ssh scp</a> <a href="/tags/svg/" style="font-size: 13.33px;">svg</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/test/" style="font-size: 13.33px;">test</a> <a href="/tags/usb-booter/" style="font-size: 10px;">usb-booter</a> <a href="/tags/view-root-iml/" style="font-size: 10px;">view_root_iml</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/12/29/svg-study-1/">svg_study</a>
          </li>
        
          <li>
            <a href="/2017/12/13/svg-study/">svg-study</a>
          </li>
        
          <li>
            <a href="/2017/12/08/openSSl/">openSSl</a>
          </li>
        
          <li>
            <a href="/2017/12/06/linux-reinstall/">linux-reinstall</a>
          </li>
        
          <li>
            <a href="/2017/12/04/Python-install/">Python-install</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>